!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("../texgen/index.js")):"function"==typeof define&&define.amd?define(["exports","../texgen/index.js"],e):e(r.TG=r.TG||{},r.TG)}(this,function(r,e){"use strict";function n(r){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=["new TG.Texture("+s+", "+m+")"],u="\n",p="  ";return(r||[]).forEach(function(r){if(r){var c=e[r.program.type];if(c&&!r.$hide){var f=void 0;f="new TG."+r.program.type+"()",Object.keys(r.program).filter(function(r){return"type"!==r&&c.params&&c.params[r]}).forEach(function(a){if("point"===a)(r.program[a]||[]).forEach(function(r){f+=u+i+p+p+"."+a+"("+r[0]+", ["+r[1].join(", ")+"])"});else if("texture"===a)f+=u+i+p+p+"."+a+"("+n(r.program.texture||[],o,p+p+i)+")";else{var c=t(r.program[a],e[r.program.type].params&&e[r.program.type].params[a],o);f+=u+i+p+p+"."+a+"("+c+")"}}),f+=u+i+p+p+".tint("+r.tint.join(", ")+")";var s="."+(r.operation||"set")+"("+f+")";a.push(s)}}}),a.join(u+i+p)+(i?"":";")}function t(r,e,n){return void 0!==e.scale&&n?r.join?r.map(function(r){return o(r,e.scale)}).join(", "):o(r,e.scale):r.join?r.join(", "):r}function o(r,e){return e?r/256+("*"+s):256*r+("/"+s)}function i(r){return new Function(s,m,"return "+r)}function a(r){return i(n(r))}function u(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=[];return r.forEach(function(r){var o={operation:r.operation};n&&r.$hide||(n||void 0===r.$hide||(o.$hide=r.$hide),r.tint&&(o.tint=r.tint.map(function(r){return p(r,e)})),o.program={},Object.keys(r.program).forEach(function(n){var t=r.program[n];Array.isArray(t)?t=t.map(function(r){return"number"==typeof r?p(r,e):Array.isArray(r)?r.map(function(r){return"number"==typeof r?p(r,e):r}):r}):"number"==typeof t&&(t=p(t,e)),o.program[n]=t}),t.push(o))}),t}function p(r,e){return e?parseFloat(r.toPrecision(e)):r}function c(r,n){var t=d({},r[n]);return t.operation="set",delete t.$hide,e.Programs.Filters[t.program.type]?null:t.program.texture?t.program.texture:[t]}function f(r,e){for(var n=[],t=0;t<=e;t++)n.push(r[t]);return n}var s="w",m="h",d=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r};r.recipeToBody=n,r.recipeToFunction=a,r.bodyToFunction=i,r.formatRecipe=u,r.componentOnIndex=c,r.componentToIndex=f,r.HEIGHT=m,r.WIDTH=s,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=texgen-recipe.js.map
